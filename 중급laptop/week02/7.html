<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        table {
            border-collapse: collapse;
        }

        td {
            width: 40px;
            height: 40px;
            border: 1px solid black;
            cursor: pointer;
        }

        td.hover {
            background-color: gray;
        }
    </style>
</head>

<body>
    <h1>크로스헤어</h1>
    <div style="color: gray">**dataset 을 쓰지 않고 풀어보세요**</div>
    <div>
        <table id="table">
            <tbody></tbody>
        </table>

    </div>
    <script>
        const WIDTH = 10, HEIGHT = 10;

        const tbody = document.querySelector('#table > tbody');
        let tdList = []
        
        const makeTable = () => {
            for(let i = 0; i < HEIGHT; i ++) {
                const tr = tbody.insertRow();
                for(let j = 0; j < WIDTH; j ++) {
                    const td = tr.insertCell()
                }
            }
            tbody.onmouseover = showCrossHair
            tdList = Array.from(tbody.querySelectorAll('tr')).map(tr => Array.from(tr.children))
        };

        const getTdRowCol = (td) => {
            const row = tdList.findIndex(line => line.some(el => el === td))
            const col = tdList[row].findIndex(el => el === td)
            return [row, col]
        }

        const getRow = (row) => tdList[row]
        const getColumn = (col) => tdList.map(line => line[col])
        const flattenTdList = () => {
            const tds = []
            tdList.forEach(line => line.forEach(td => tds.push(td)))
            return tds
        }

        const showCrossHair = (e) => {
            const td = e.target;
            const coords = getTdRowCol(td)

            const row = getRow(coords[0])
            const column = getColumn(coords[1])

            flattenTdList().forEach(td => td.classList.remove('hover'))
            row.concat(column).forEach(td => td.classList.add('hover'))
        };

        makeTable();

    </script>
</body>

</html>